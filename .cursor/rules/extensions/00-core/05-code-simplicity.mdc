---
alwaysApply: ${cursor.file.path.match(/\.(yaml|sh)$/) && cursor.file.content.length > 100}
---


# –ü—Ä–∞–≤–∏–ª–æ 05: –ü—Ä–∏–Ω—Ü–∏–ø –º–∏–Ω–∏–º–∞–ª–∏–∑–º–∞ –≤ –∫–æ–¥–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π rpi-image-gen

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –º–∏–Ω–∏–º–∞–ª–∏–∑–º–∞ –∏ –ø—Ä–æ—Å—Ç–æ—Ç—ã –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π rpi-image-gen, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å –∏ –ø–µ—Ä–µ—É—Å–ª–æ–∂–Ω–µ–Ω–∏–µ –∫–æ–¥–∞.

## –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è üî¥ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï

## –ü—Ä–∏–Ω—Ü–∏–ø –º–∏–Ω–∏–º–∞–ª–∏–∑–º–∞

### YAGNI (You Aren't Gonna Need It) - –ù–µ –ø–∏—à–∏—Ç–µ –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –Ω—É–∂–µ–Ω —Å–µ–π—á–∞—Å

#### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥
```yaml
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ
mmdebstrap:
  packages:
    - nginx
    - curl
  customize-hooks:
    - |
      #!/bin/bash
      set -euo pipefail

      # –¢–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
      cat > /etc/nginx/sites-available/default << 'EOF'
      server {
          listen 80 default_server;
          root /var/www/html;
          index index.html;
      }
      EOF

      systemctl enable nginx
```

#### –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥
```yaml
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –∏–∑–±—ã—Ç–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
mmdebstrap:
  packages:
    - nginx
    - apache2         # –ó–∞—á–µ–º –æ–±–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞?
    - mysql-server    # –ù–µ –Ω—É–∂–µ–Ω –¥–ª—è –ø—Ä–æ—Å—Ç–æ–π —Å—Ç–∞—Ç–∏–∫–∏
    - php             # –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
    - python3         # –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è
    - ruby            # –ò–∑–±—ã—Ç–æ—á–Ω–æ
  customize-hooks:
    - |
      # –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –Ω–µ–Ω—É–∂–Ω–æ–≥–æ –∫–æ–¥–∞
      # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ nginx (–Ω—É–∂–Ω–∞)
      # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ apache (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
      # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ mysql (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
      # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ php (–Ω–µ –Ω—É–∂–Ω–æ)
      # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
      # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–∏–∑–±—ã—Ç–æ—á–Ω–æ–µ)
      # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è MVP)
```

### DRY (Don't Repeat Yourself) - –ù–µ –ø–æ–≤—Ç–æ—Ä—è–π—Ç–µ—Å—å

#### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ñ—É–Ω–∫—Ü–∏–π
```bash
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - DRY –ø—Ä–∏–Ω—Ü–∏–ø
SERVICE_NAME="my-app"
SERVICE_USER="app-user"
CONFIG_DIR="/etc/${SERVICE_NAME}"

create_service_user() {
    if ! id -u "$SERVICE_USER" >/dev/null 2>&1; then
        useradd --system --shell /bin/false --home "/var/lib/$SERVICE_USER" "$SERVICE_USER"
    fi
}

setup_directories() {
    mkdir -p "$CONFIG_DIR" "/var/log/$SERVICE_NAME" "/var/lib/$SERVICE_NAME"
    chown -R "$SERVICE_USER:$SERVICE_USER" "/var/lib/$SERVICE_NAME"
}

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –≤–º–µ—Å—Ç–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
create_service_user
setup_directories

# –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
cat > "${CONFIG_DIR}/config" << EOF
service_name=${SERVICE_NAME}
user=${SERVICE_USER}
config_dir=${CONFIG_DIR}
EOF
```

#### –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ - –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
```bash
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ –∫–æ–¥–∞
# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ–≤—Ç–æ—Ä 1)
if ! id -u "my-app-user" >/dev/null 2>&1; then
    useradd --system --shell /bin/false --home "/var/lib/my-app-user" "my-app-user"
fi

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π (–ø–æ–≤—Ç–æ—Ä 1)
mkdir -p /etc/my-app /var/log/my-app /var/lib/my-app
chown -R my-app-user:my-app-user /var/lib/my-app

# –ü–æ–∑–∂–µ –≤ –∫–æ–¥–µ (–ø–æ–≤—Ç–æ—Ä 2)
if ! id -u "my-app-user" >/dev/null 2>&1; then
    useradd --system --shell /bin/false --home "/var/lib/my-app-user" "my-app-user"
fi

# –ï—â–µ —Ä–∞–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–ø–æ–≤—Ç–æ—Ä 2)
mkdir -p /etc/my-app /var/log/my-app /var/lib/my-app
chown -R my-app-user:my-app-user /var/lib/my-app
```

### KISS (Keep It Simple, Stupid) - –î–µ–ª–∞–π—Ç–µ –ø—Ä–æ—Å—Ç–æ

#### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ - –ø—Ä–æ—Å—Ç—ã–µ —Ä–µ—à–µ–Ω–∏—è
```yaml
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –ø—Ä–æ—Å—Ç–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
device:
  layer: pi5
  hostname: rpi-simple

image:
  layer: image-rpios

layer:
  base: bookworm-minbase
  app: simple-web-app
```

#### –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ - –∏–∑–±—ã—Ç–æ—á–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
```yaml
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –ø–µ—Ä–µ—É—Å–ª–æ–∂–Ω–µ–Ω–∏–µ
device:
  layer: pi5
  hostname: rpi-complex-${BUILD_ID}-${TIMESTAMP}
  timezone: Europe/Moscow
  locale: ru_RU.UTF-8
  keyboard: ru
  wifi_country: RU
  boot_options:
    - quiet
    - splash
    - loglevel=3
  gpu_mem: 256
  hdmi_mode: 4

image:
  layer: image-rpios
  boot_part_size: 300%
  root_part_size: 500%
  swap_size: 1G
  compression: gzip
  checksum: true

layer:
  base: bookworm-minbase
  security: security-hardened
  monitoring: prometheus-stack
  logging: rsyslog-advanced
  backup: automated-backup
  networking: complex-networking
  app: over-engineered-app
  # 10+ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–ª–æ–µ–≤ –¥–ª—è –ø—Ä–æ—Å—Ç–æ–π –∑–∞–¥–∞—á–∏
```

### Single Responsibility Principle - –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å

#### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ - –æ–¥–∏–Ω —Å–ª–æ–π = –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞
```yaml
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
# layer/web-server.yaml - —Ç–æ–ª—å–∫–æ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
mmdebstrap:
  packages: [nginx]
  customize-hooks: [setup_nginx_only]

# layer/database.yaml - —Ç–æ–ª—å–∫–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
mmdebstrap:
  packages: [postgresql]
  customize-hooks: [setup_postgres_only]

# layer/monitoring.yaml - —Ç–æ–ª—å–∫–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
mmdebstrap:
  packages: [prometheus-node-exporter]
  customize-hooks: [setup_monitoring_only]
```

#### –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ - —Å–º–µ—à–∏–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–µ–π
```yaml
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π —Å–ª–æ–π
mmdebstrap:
  packages:
    - nginx apache2 postgresql mysql-server  # –†–∞–∑–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
    - prometheus grafana node-exporter      # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
    - curl wget git                          # –£—Ç–∏–ª–∏—Ç—ã
  customize-hooks:
    - |
      # –°–º–µ—à–∏–≤–∞–Ω–∏–µ –≤—Å–µ–≥–æ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
      setup_web_servers     # nginx + apache
      setup_databases       # postgres + mysql
      setup_monitoring      # prometheus + grafana
      setup_utilities       # curl, wget, git
```

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –û—Ü–µ–Ω–∏–≤–∞–π—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞

#### –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –æ—Ü–µ–Ω–∫–∏:
- **–ó–∞—á–µ–º –Ω—É–∂–Ω–∞ —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è?** - –ï—Å—Ç—å –ª–∏ —Ä–µ–∞–ª—å–Ω–∞—è –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å?
- **–ú–æ–∂–Ω–æ –ª–∏ —É–ø—Ä–æ—Å—Ç–∏—Ç—å?** - –ï—Å—Ç—å –ª–∏ –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±?
- **–ë—É–¥–µ—Ç –ª–∏ —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è?** - YAGNI –ø—Ä–∏–Ω—Ü–∏–ø
- **–ú–æ–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?** - DRY –ø—Ä–∏–Ω—Ü–∏–ø

#### –ü—Ä–∏–º–µ—Ä—ã –æ—Ü–µ–Ω–∫–∏:
```bash
# ‚ùå –ò–ó–ë–´–¢–û–ß–ù–û - —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
configure_service() {
    local service_name="$1"
    local service_user="$2"
    local service_group="$3"
    local config_file="$4"
    local log_file="$5"
    local pid_file="$6"
    local port="$7"
    local timeout="$8"
    # 10+ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –ø—Ä–æ—Å—Ç–æ–π –∑–∞–¥–∞—á–∏
}

# ‚úÖ –ú–ò–ù–ò–ú–ê–õ–¨–ù–û - —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
configure_service() {
    local service_name="$1"
    local port="${2:-8080}"
    # –û—Å—Ç–∞–ª—å–Ω–æ–µ –±–µ—Ä–µ—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ defaults
}
```

### –ò–∑–±–µ–≥–∞–π—Ç–µ –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

#### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥
```bash
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —Å–Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—Ç–æ–º –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º
install_package() {
    apt-get update && apt-get install -y "$1"
}

# –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å—Ç–∞–Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º–æ–π - —Ç–æ–≥–¥–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å:
# install_package() {
#     if ! dpkg -l "$1" >/dev/null 2>&1; then
#         apt-get update && apt-get install -y "$1"
#     fi
# }
```

#### –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥
```bash
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
install_package() {
    # –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è, –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
    # –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ —É—Å–ª–æ–≤–∏—è
    # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    # –í—Å–µ —ç—Ç–æ –¥–ª—è –ø—Ä–æ—Å—Ç–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞–∫–µ—Ç–∞
    # –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è 1 —Ä–∞–∑
}
```

### –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

#### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥
```bash
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
if systemctl is-active --quiet "$SERVICE_NAME"; then
    echo "Service is running"
fi

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
CONFIG_FILE="/etc/${APP_NAME}/config"
LOG_FILE="/var/log/${APP_NAME}/app.log"
PID_FILE="/var/run/${APP_NAME}.pid"
```

#### –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥
```bash
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –∏–∑–æ–±—Ä–µ—Ç–∞–π—Ç–µ –≤–µ–ª–æ—Å–∏–ø–µ–¥
custom_service_check() {
    # –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–∞
    # –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
}

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
CONFIG_FILE="/opt/${APP_NAME}/custom/config"
LOG_FILE="/tmp/${APP_NAME}.log"  # –õ–æ–≥–∏ –≤ tmp?
PID_FILE="/home/${APP_NAME}.pid" # PID –≤ home?
```

## –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

### –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –º–∏–Ω–∏–º–∞–ª–∏–∑–º–∞:
- **Lines of Code (LOC)** - –º–µ–Ω—å—à–µ –∫–æ–¥–∞ = –ª—É—á—à–µ (–ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏)
- **Cyclomatic Complexity** - –ø—Ä–æ—Å—Ç–æ—Ç–∞ –ª–æ–≥–∏–∫–∏
- **Number of Functions** - –º–µ–Ω—å—à–µ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —Ç–æ–π –∂–µ –∑–∞–¥–∞—á–∏
- **Code Duplication** - —Å—Ç—Ä–µ–º–ª–µ–Ω–∏–µ –∫ 0%

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è:
```bash
# –ü–æ–¥—Å—á–µ—Ç —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
find layer/ -name "*.yaml" -exec wc -l {} \; | tail -1

# –ü–æ–∏—Å–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
find layer/ -name "*.yaml" -exec grep -l "nginx" {} \; | wc -l

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (–≤ bash —Å–∫—Ä–∏–ø—Ç–∞—Ö)
find layer-hooks/ -name "*.sh" -exec sh -c '
    file="$1"
    functions=$(grep "^[[:space:]]*function " "$file" | wc -l)
    conditionals=$(grep -c "\\bif \\|while \\|for \\|case \\|&&" "$file")
    echo "$file: functions=$functions, conditionals=$conditionals"
' _ {} \;
```

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ Cursor

### –ü—Ä–∞–≤–∏–ª–∞ –ª–∏–Ω—Ç–∏–Ω–≥–∞ –¥–ª—è –º–∏–Ω–∏–º–∞–ª–∏–∑–º–∞:
- [ ] –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –¥–ª–∏–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö (>50 —Å—Ç—Ä–æ–∫)
- [ ] –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
- [ ] –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### Code Actions –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è:
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —É–ø—Ä–æ—â–µ–Ω–∏–π
# "–ú–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å 10 —Å—Ç—Ä–æ–∫ –Ω–∞ 1 —Ñ—É–Ω–∫—Ü–∏—é"
# "–£–±—Ä–∞—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é"
# "–û–±—ä–µ–¥–∏–Ω–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∏"
```

## –ê–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω—ã, –∫–æ—Ç–æ—Ä—ã—Ö —Å–ª–µ–¥—É–µ—Ç –∏–∑–±–µ–≥–∞—Ç—å

### Gold Plating - –ó–æ–ª–æ—Ç–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
```yaml
# ‚ùå –î–û–ë–ê–í–õ–ï–ù–ò–ï –õ–ò–®–ù–ï–ì–û
# "–ê –≤–¥—Ä—É–≥ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è?" - –º—ã—à–ª–µ–Ω–∏–µ
customize-hooks:
  - |
    # –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
    setup_app

    # "–ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π" –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:
    setup_backup        # "–í–¥—Ä—É–≥ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è"
    setup_monitoring    # "–ú–æ–∂–µ—Ç –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è"
    setup_logging       # "–ü–æ–ª–µ–∑–Ω–æ –∏–º–µ—Ç—å"
    setup_caching       # "–î–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏"
    setup_redundancy    # "–î–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏"
```

### Feature Creep - –ü–æ–ª–∑—É—á–µ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
```yaml
# ‚ùå –ü–û–°–¢–ï–ü–ï–ù–ù–û–ï –£–°–õ–û–ñ–ù–ï–ù–ò–ï
# –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ:
layer:
  base: bookworm-minbase
  app: simple-app

# –ü–æ—Ç–æ–º –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è "–º–∞–ª–µ–Ω—å–∫–∞—è" —Ñ—É–Ω–∫—Ü–∏—è:
layer:
  base: bookworm-minbase
  security: basic-security  # "–ü—Ä–æ—Å—Ç–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
  app: simple-app

# –ò –µ—â–µ –æ–¥–Ω–∞:
layer:
  base: bookworm-minbase
  security: basic-security
  monitoring: simple-monitoring  # "–¢–æ–ª—å–∫–æ –º–µ—Ç—Ä–∏–∫–∏"
  app: simple-app

# –ò –µ—â–µ:
layer:
  base: bookworm-minbase
  security: advanced-security    # "–õ—É—á—à–µ –±–∞–∑–æ–≤–æ–π"
  monitoring: full-monitoring    # "–ë–æ–ª—å—à–µ –º–µ—Ç—Ä–∏–∫"
  backup: automated-backup       # "–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å"
  networking: advanced-networking # "–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å"
  app: complex-app               # "–ë–æ–ª—å—à–µ —Ñ—É–Ω–∫—Ü–∏–π"
```

---

## –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–ª—é–¥–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª–∞ üî¥ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- [ ] –ü—Ä–∞–≤–∏–ª–æ –∏–∑—É—á–µ–Ω–æ –∏ –ø–æ–Ω—è—Ç–æ –∫–æ–º–∞–Ω–¥–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- [ ] –°–æ–±–ª—é–¥–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –≤ CI/CD
- [ ] –ù–∞—Ä—É—à–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –º–µ—Ä–¥–∂–∞
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–∞
- [ ] –†–µ–≥—É–ª—è—Ä–Ω—ã–π –∞—É–¥–∏—Ç —Å–æ–±–ª—é–¥–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª–∞

### –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
- [ ] 100% —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ –Ω–æ–≤–æ–º –∫–æ–¥–µ
- [ ] –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏–π –≤ –æ—Å–Ω–æ–≤–Ω—ã—Ö –≤–µ—Ç–∫–∞—Ö
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–±–ª—é–¥–µ–Ω–∏—è
- [ ] –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ—Ç –∫–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- [ ] –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–æ–∫ –ø—Ä–∞–≤–∏–ª–∞

### –ò—Å—Ç–æ—á–Ω–∏–∫
–°–æ–∑–¥–∞–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –º–∏–Ω–∏–º–∞–ª–∏–∑–º–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ü–û (YAGNI, DRY, KISS, Single Responsibility)