---
alwaysApply: ${cursor.file.content && (cursor.file.content.includes("suite: trixie") || cursor.file.content.includes("trixie"))}
---

# –ü—Ä–∞–≤–∏–ª–æ 78: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Debian Trixie –≤ rpi-image-gen

## –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Debian Trixie (testing) –≤ rpi-image-gen.

## –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è üî¥ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Debian Trixie

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ suite –≤ mmdebstrap
```yaml
---
mmdebstrap:
  suite: trixie
  keyrings:
    - /usr/share/keyrings/debian-archive-keyring.gpg
  mode: unshare
  target: root.tar.xz
  variant: apt
```

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Debian Trixie

#### Testing repository –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- **–ß–∞—Å—Ç—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –ø–∞–∫–µ—Ç—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —á–∞—Å—Ç–æ, –≤–æ–∑–º–æ–∂–Ω—ã breaking changes
- **–ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–∞–∫–µ—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ—Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã
- **–ù–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏**: –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ—Å–ª–µ–¥–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –ü–û (Rust, Go, Python, etc.)

#### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–∞–∫–µ—Ç–æ–≤ –≤ Trixie
apt-cache policy package-name

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ pinning –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
cat > /etc/apt/preferences.d/trixie-pinning << EOF
Package: *
Pin: release a=stable
Pin-Priority: 900

Package: specific-package
Pin: release a=trixie
Pin-Priority: 990
EOF
```

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è Trixie —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π
```yaml
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –ø–∞–∫–µ—Ç–æ–≤
validate_trixie_packages() {
    local packages=("rustc" "golang-go" "python3-dev" "nodejs")

    for pkg in "${packages[@]}"; do
        if apt-cache show "$pkg" 2>/dev/null | grep -q "Version:"; then
            echo "‚úì Package $pkg available in Trixie"
        else
            echo "‚úó Package $pkg not available or problematic in Trixie"
            return 1
        fi
    done
}
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ toolchain

### Rust –≤ Debian Trixie
```yaml
# Rust –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è Debian
mmdebstrap:
  suite: trixie
  packages:
    - rustc
    - cargo
    - rustfmt
    - clippy

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ rustup
customize-hooks:
  - |
    curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
    source $HOME/.cargo/env
    rustup toolchain install stable
```

### Go –≤ Debian Trixie
```yaml
# Go –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
mmdebstrap:
  suite: trixie
  packages:
    - golang-go
    - golang-golang-x-tools

# –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –≤–µ—Ä—Å–∏—è Go 1.21+
customize-hooks:
  - |
    go version
    go install golang.org/x/tools/cmd/goimports@latest
```

### Python –∏ Node.js —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã
```yaml
mmdebstrap:
  suite: trixie
  packages:
    - python3.11
    - python3.11-dev
    - python3-pip
    - nodejs
    - npm
    - yarnpkg

customize-hooks:
  - |
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Python virtualenv
    python3 -m pip install --user pipx
    pipx install poetry

    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Node.js
    npm install -g pnpm
    npm install -g @microsoft/rush
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ Trixie –æ–∫—Ä—É–∂–µ–Ω–∏–∏

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏
```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ unattended-upgrades –¥–ª—è testing
cat > /etc/apt/apt.conf.d/50unattended-upgrades << EOF
Unattended-Upgrade::Origins-Pattern {
    "origin=Debian,codename=trixie,label=Debian";
    "origin=Debian,codename=trixie-security,label=Debian-Security";
};
EOF
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ broken packages
apt-get check

# –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
apt-get install -f

# –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
apt-cache rdepends broken-package
```

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è Trixie

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
```yaml
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ apt-cacher-ng –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
customize-hooks:
  - |
    apt-get install -y apt-cacher-ng
    systemctl enable apt-cacher-ng
    echo 'Acquire::http::Proxy "http://localhost:3142";' > /etc/apt/apt.conf.d/01proxy
```

### –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
```yaml
# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
mmdebstrap:
  suite: trixie
  apt:
    conf: |
      Acquire::Languages "none";
      APT::Install-Recommends "false";
      APT::Install-Suggests "false";
      DPkg::Options {"--force-confdef";"--force-confold";};
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫ Trixie

### –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
```bash
# –ü—Ä–æ–±–ª–µ–º–∞: –ø–∞–∫–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
apt-cache search package-name
apt-cache show package-name

# –ü—Ä–æ–±–ª–µ–º–∞: –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
apt-get install -o Debug::pkgProblemResolver=yes package-name

# –ü—Ä–æ–±–ª–µ–º–∞: broken packages
dpkg --audit
apt-get install -f
```

### –†–µ–∑–µ—Ä–≤–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
```yaml
# Fallback –Ω–∞ stable –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
customize-hooks:
  - |
    # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –∏–∑ stable
    echo "deb http://deb.debian.org/debian stable main" > /etc/apt/sources.list.d/stable.list
    apt-get update
    apt-get install -y --no-install-recommends -t stable systemd

    # –ó–∞—Ç–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ trixie –¥–ª—è development tools
    sed -i 's/stable/trixie/g' /etc/apt/sources.list.d/stable.list
    apt-get update
    apt-get upgrade
```

## –ú–µ—Ç—Ä–∏–∫–∏ —Å–æ–±–ª—é–¥–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª–∞ üî¥ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `suite: trixie` –≤–º–µ—Å—Ç–æ `unstable`
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ security updates –¥–ª—è testing
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–±–æ—Ä–∫–∞—Ö
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
- [ ] –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø–∞–∫–µ—Ç–æ–≤ –≤ Trixie
- [ ] –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤–µ—Ä—Å–∏–π upstream
- [ ] –ú–∏–Ω–∏–º—É–º manual interventions
- [ ] –•–æ—Ä–æ—à–∞—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å —Å–±–æ—Ä–æ–∫
- [ ] –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å stable

### –ò—Å—Ç–æ—á–Ω–∏–∫
–°–æ–∑–¥–∞–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø—ã—Ç–∞ —Ä–∞–±–æ—Ç—ã —Å Debian testing –≤ embedded —Å–∏—Å—Ç–µ–º–∞—Ö