# Enterprise Infrastructure RAID Configuration
# Optimized for network appliances with high availability

device:
  layer: rpi-cm5
  class: cm5
  variant: 8G

image:
  layer: mdraid1-external-root
  name: infrastructure-network-appliance
  mdraid1_external_root_rootfs_type: btrfs     # Btrfs for advanced features
  mdraid1_external_root_boot_part_size: 1G     # Large boot for infrastructure software
  mdraid1_external_root_root_part_size: 512G   # Massive storage for infrastructure data
  mdraid1_external_root_raid_level: RAID1     # Maximum availability and performance
  mdraid1_external_root_raid_devices: 2        # Full RAID1 for infrastructure reliability (2 devices for RAID1)
  mdraid1_external_root_encryption_enabled: y  # Mandatory for infrastructure security
  mdraid1_external_root_sector_size: 4096      # Advanced format infrastructure drives
  mdraid1_external_root_compression: zstd      # Optimized for infrastructure workloads
  mdraid1_external_root_pmap: crypt           # Secure encrypted deployment

  # Performance optimizations for infrastructure use case
  mdraid1_external_root_apt_cache: y              # Fast package installation
  mdraid1_external_root_ccache: y                 # Cross-compilation optimization
  mdraid1_external_root_ccache_size: 25G          # Very large cache for infrastructure builds
  mdraid1_external_root_parallel_jobs: 12         # High parallel processing for large builds
  mdraid1_external_root_image_size_optimization: y # Optimize for deployment

layer:
  base: bookworm-minbase
  security: security-suite
  monitoring: cockpit
  container: docker-debian-bookworm

infrastructure:
  monitoring_enabled: y
  logging_enabled: y
  metrics_collection: y
  alerting_configured: y
  load_balancing: y
  failover_support: y

networking:
  vlan_support: y
  bonding_enabled: y
  firewall_configured: y
  dns_configured: y
  vpn_server: y
  network_monitoring: y

security:
  selinux_enabled: y
  apparmor_enabled: y
  auditd_enabled: y
  fail2ban_enabled: y
  intrusion_detection: y
  secure_boot: y

monitoring:
  system_metrics: y
  network_monitoring: y
  application_monitoring: y
  log_aggregation: y
  alerting_rules: y
  dashboard_integration: y

deployment:
  ansible_integration: y
  terraform_ready: y
  kubernetes_ready: y
  monitoring_ready: y
  configuration_backup: y

compliance:
  infrastructure_standards: y
  security_baseline: y
  audit_requirements: y
  regulatory_compliance: y

# Enterprise infrastructure integration
enterprise:
  monitoring_stack: prometheus_grafana_elk
  configuration_management: ansible_terraform
  deployment_pipeline: github_actions_jenkins
  asset_management: infrastructure_itam
  ticketing_system: jira_servicedesk
  knowledge_base: confluence
  collaboration: slack_teams
  security_operations: siem_splunk
