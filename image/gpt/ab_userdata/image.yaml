# METABEGIN
# X-Env-Layer-Name: image-rota
# X-Env-Layer-Category: image
# X-Env-Layer-Desc: Rotational OTA and AB support with GPT.
#  This layout supports redundancy of os and system slot components and
#  provides seperate boot and user data partitions.
# X-Env-Layer-Version: 2.0.0
# X-Env-Layer-Requires: image-base,device-base
# X-Env-Layer-Provides: image
#
# X-Env-VarRequires: IGconf_device_storage_type
#
# X-Env-VarPrefix: image
#
# X-Env-Var-boot_part_size: 100%
# X-Env-Var-boot_part_size-Desc: Boot partition size per slot.
# X-Env-Var-boot_part_size-Required: n
# X-Env-Var-boot_part_size-Valid: size
# X-Env-Var-boot_part_size-Set: y
#
# X-Env-Var-system_part_size: 100%
# X-Env-Var-system_part_size-Desc: System partition size per slot.
# X-Env-Var-system_part_size-Required: n
# X-Env-Var-system_part_size-Valid: size
# X-Env-Var-system_part_size-Set: y
#
# X-Env-Var-assetdir: ${DIRECTORY}
# X-Env-Var-assetdir-Desc: Image specific asset directory
# X-Env-Var-assetdir-Required: n
# X-Env-Var-assetdir-Valid: string
# X-Env-Var-assetdir-Set: y
#
# X-Env-Var-pmap: clear
# X-Env-Var-pmap-Desc: Provisioning Map type for this image layout.
#  All partitions will be provisioned unencrypted (clear).
#  System partitions will be provisioned encrypted (crypt).
# X-Env-Var-pmap-Required: n
# X-Env-Var-pmap-Valid: clear,crypt
# X-Env-Var-pmap-Set: force
#
# X-Env-Var-ptable_protect: $( [ "${IGconf_device_storage_type:-}" = "emmc" ] && echo y || echo n )
# X-Env-Var-ptable_protect-Desc: Enable eMMC Power-On Write Protect of the partition
#  table. If enabled, the first 8MB of the boot storage device will be
#  protected. Applies to eMMC only.
# X-Env-Var-ptable_protect-Required: n
# X-Env-Var-ptable_protect-Valid: string
# X-Env-Var-ptable_protect-Set: y
#
# METAEND
---
mmdebstrap:
  packages:
    - sed
    - coreutils
    - initramfs-tools
    - rpi-blockutils
    - dosfstools
    - e2fsprogs
