# mke2fs.conf - Configuration for ext4 filesystem creation
# Note: This file is used only for ext4 rootfs_type.
# For btrfs and f2fs, genimage uses built-in filesystem creation tools.

[defaults]
base_features = sparse_super,large_file,filetype,resize_inode,dir_index,ext_attr
default_mntopts = acl,user_xattr
enable_periodic_fsck = 0
blocksize = 4096
inode_size = 256
inode_ratio = 16384

# RAID1 optimized settings for ext4
[fs_types]
ext4 = {
   features = has_journal,extent,huge_file,flex_bg,metadata_csum,64bit,dir_nlink,extra_isize
   inode_ratio = 32768
   blocksize = 4096
   reserved_ratio = 1
}

# SSD optimizations for RAID1 (alternative profile)
ext4_raid1 = {
   features = has_journal,extent,huge_file,flex_bg,metadata_csum,64bit,dir_nlink,extra_isize
   inode_ratio = 16384
   blocksize = 4096
   reserved_ratio = 0.5
   journal_ioprio = 3
}
