# METABEGIN
# X-Env-Layer-Name: image-mbr-mdraid-luks-btrfs
# X-Env-Layer-Category: image
# X-Env-Layer-Desc: Raspberry Pi OS style image layout with MBR boot partition on SD card,
#  MD RAID1 on 2 SATA SSDs (via Radxa SATA Penta HAT), LUKS2 encryption, and Btrfs root filesystem
# X-Env-Layer-Version: 1.0.0
# X-Env-Layer-Requires: image-base, mdadm, cryptsetup, btrfs, radxa-sata-penta-hat
# X-Env-Layer-RequiresProvider: docker
# X-Env-Layer-Provides: image
#
# X-Env-VarPrefix: image
#
# X-Env-Var-boot_part_size: 200M
# X-Env-Var-boot_part_size-Desc: Boot partition size (on SD card)
# X-Env-Var-boot_part_size-Required: n
# X-Env-Var-boot_part_size-Valid: size
# X-Env-Var-boot_part_size-Set: y
#
# X-Env-Var-mdraid_devices: /dev/sda,/dev/sdb
# X-Env-Var-mdraid_devices-Desc: Comma-separated list of SATA SSD devices for MD RAID1 (device names)
# X-Env-Var-mdraid_devices-Required: n
# X-Env-Var-mdraid_devices-Valid: string
# X-Env-Var-mdraid_devices-Set: y
#
# X-Env-Var-mdraid_uuids: <SSD1_UUID>,<SSD2_UUID>
# X-Env-Var-mdraid_uuids-Desc: Comma-separated list of disk UUIDs for MD RAID1 (preferred over device names)
# X-Env-Var-mdraid_uuids-Required: n
# X-Env-Var-mdraid_uuids-Valid: string
# X-Env-Var-mdraid_uuids-Set: n
#
# X-Env-Var-luks_keyfile: /boot/luks-key
# X-Env-Var-luks_keyfile-Desc: Path to LUKS keyfile on boot partition
# X-Env-Var-luks_keyfile-Required: n
# X-Env-Var-luks_keyfile-Valid: string
# X-Env-Var-luks_keyfile-Set: y
#
# X-Env-Var-assetdir: ${DIRECTORY}
# X-Env-Var-assetdir-Desc: Image specific asset directory
# X-Env-Var-assetdir-Required: n
# X-Env-Var-assetdir-Valid: string
# X-Env-Var-assetdir-Set: y
#
# X-Env-Var-swap_size: 8G
# X-Env-Var-swap_size-Desc: Swap size (file on Btrfs subvolume)
# X-Env-Var-swap_size-Required: n
# X-Env-Var-swap_size-Valid: size
# X-Env-Var-swap_size-Set: y
#
# X-Env-Var-pmap: crypt
# X-Env-Var-pmap-Desc: Provisioning Map identifier for this image layout.
#  Root partition will be provisioned encrypted (crypt).
# X-Env-Var-pmap-Required: n
# X-Env-Var-pmap-Valid: crypt,
# X-Env-Var-pmap-Set: y
# METAEND
---
