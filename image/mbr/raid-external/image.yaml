# METABEGIN
# X-Env-Layer-Name: mdraid1-external-root
# X-Env-Layer-Category: image
# X-Env-Layer-Desc: Raspberry Pi OS style image layout with MBR boot partition and
#  GPT external drives using genimage mdraid for RAID1. SD card for boot,
#  external drives for RAID1 root (ext4 or btrfs). Enterprise-ready with
#  encryption, SBOM generation, and comprehensive provisioning support.
# X-Env-Layer-Version: 1.0.0
# X-Env-Layer-Requires: image-base,raid-base,mdadm-tools
# X-Env-Layer-Provides: image
# X-Env-Layer-Homepage: https://github.com/supernova-project/rpi-image-gen
# X-Env-Layer-BugTracker: https://github.com/supernova-project/rpi-image-gen/issues
# X-Env-Layer-Support: https://github.com/supernova-project/rpi-image-gen/discussions
#
# X-Env-VarPrefix: raid1_external
#
# X-Env-Var-raid1_external_rootfs_type: ext4
# X-Env-Var-raid1_external_rootfs_type-Desc: Root filesystem type for RAID array
# X-Env-Var-raid1_external_rootfs_type-Required: n
# X-Env-Var-raid1_external_rootfs_type-Valid: ext4,btrfs
# X-Env-Var-raid1_external_rootfs_type-Set: y
#
# X-Env-Var-raid1_external_boot_part_size: 100%
# X-Env-Var-raid1_external_boot_part_size-Desc: Boot partition size on SD card
# X-Env-Var-raid1_external_boot_part_size-Required: n
# X-Env-Var-raid1_external_boot_part_size-Valid: size
# X-Env-Var-raid1_external_boot_part_size-Set: y
#
# X-Env-Var-raid1_external_root_part_size: 100%
# X-Env-Var-raid1_external_root_part_size-Desc: Total root partition size for all RAID devices
# X-Env-Var-raid1_external_root_part_size-Required: n
# X-Env-Var-raid1_external_root_part_size-Valid: size
# X-Env-Var-raid1_external_root_part_size-Set: y
#
# X-Env-Var-raid1_external_raid_level: RAID1
# X-Env-Var-raid1_external_raid_level-Desc: RAID level for external drives.
#  RAID1: Mirroring (redundancy, data safety) using genimage mdraid
# X-Env-Var-raid1_external_raid_level-Required: n
# X-Env-Var-raid1_external_raid_level-Valid: RAID1
# X-Env-Var-raid1_external_raid_level-Set: y
#
# X-Env-Var-raid1_external_raid_devices: 2
# X-Env-Var-raid1_external_raid_devices-Desc: Number of external drives for RAID1 array.
#  2: Required for RAID1 configuration (fixed)
# X-Env-Var-raid1_external_raid_devices-Required: n
# X-Env-Var-raid1_external_raid_devices-Valid: 2
# X-Env-Var-raid1_external_raid_devices-Set: y
#
# X-Env-Var-raid1_external_encryption_enabled: y
# X-Env-Var-raid1_external_encryption_enabled-Desc: Enable encryption for RAID array.
#  y: LUKS2 encryption with secure key management (recommended for production)
#  n: Unencrypted deployment (development/testing only)
# X-Env-Var-raid1_external_encryption_enabled-Required: n
# X-Env-Var-raid1_external_encryption_enabled-Valid: y,n
# X-Env-Var-raid1_external_encryption_enabled-Set: y
#
# X-Env-Var-raid1_external_sector_size: 512
# X-Env-Var-raid1_external_sector_size-Desc: Sector size for external drives
# X-Env-Var-raid1_external_sector_size-Required: n
# X-Env-Var-raid1_external_sector_size-Valid: 512,4096
# X-Env-Var-raid1_external_sector_size-Set: y
#
# X-Env-Var-raid1_external_compression: zstd
# X-Env-Var-raid1_external_compression-Desc: Compression type for RAID images.
#  zstd: Best compression ratio and speed (recommended)
#  gzip: Good compatibility, slower than zstd
#  none: No compression for maximum speed
# X-Env-Var-raid1_external_compression-Required: n
# X-Env-Var-raid1_external_compression-Valid: none,zstd,gzip
# X-Env-Var-raid1_external_compression-Set: y
#
# X-Env-Var-raid1_external_apt_cache: y
# X-Env-Var-raid1_external_apt_cache-Desc: Enable APT package caching for faster builds
# X-Env-Var-raid1_external_apt_cache-Required: n
# X-Env-Var-raid1_external_apt_cache-Valid: y,n
# X-Env-Var-raid1_external_apt_cache-Set: y
#
# X-Env-Var-raid1_external_ccache: y
# X-Env-Var-raid1_external_ccache-Desc: Enable ccache for faster cross-compilation
# X-Env-Var-raid1_external_ccache-Required: n
# X-Env-Var-raid1_external_ccache-Valid: y,n
# X-Env-Var-raid1_external_ccache-Set: y
#
# X-Env-Var-raid1_external_ccache_size: 5G
# X-Env-Var-raid1_external_ccache_size-Desc: ccache maximum cache size
# X-Env-Var-raid1_external_ccache_size-Required: n
# X-Env-Var-raid1_external_ccache_size-Valid: size
# X-Env-Var-raid1_external_ccache_size-Set: y
#
# X-Env-Var-raid1_external_parallel_jobs: 0
# X-Env-Var-raid1_external_parallel_jobs-Desc: Number of parallel build jobs (0 = auto-detect)
# X-Env-Var-raid1_external_parallel_jobs-Required: n
# X-Env-Var-raid1_external_parallel_jobs-Valid: int
# X-Env-Var-raid1_external_parallel_jobs-Set: y
#
# X-Env-Var-raid1_external_image_size_optimization: y
# X-Env-Var-raid1_external_image_size_optimization-Desc: Enable image size optimization techniques
# X-Env-Var-raid1_external_image_size_optimization-Required: n
# X-Env-Var-raid1_external_image_size_optimization-Valid: y,n
# X-Env-Var-raid1_external_image_size_optimization-Set: y
#
# X-Env-Var-raid1_external_mbr_type: mbr
# X-Env-Var-raid1_external_mbr_type-Desc: Partition table type for external drives
# X-Env-Var-raid1_external_mbr_type-Required: n
# X-Env-Var-raid1_external_mbr_type-Valid: mbr,gpt
# X-Env-Var-raid1_external_mbr_type-Set: y
#
# X-Env-Var-raid1_external_assetdir: ${DIRECTORY}
# X-Env-Var-raid1_external_assetdir-Desc: Image specific asset directory
# X-Env-Var-raid1_external_assetdir-Required: n
# X-Env-Var-raid1_external_assetdir-Valid: string
# X-Env-Var-raid1_external_assetdir-Set: y
#
# X-Env-Var-raid1_external_pmap: crypt
# X-Env-Var-raid1_external_pmap-Desc: Provisioning Map identifier for this image layout.
#  All partitions will be provisioned encrypted (crypt) by default.
#  Use 'clear' for unencrypted deployment.
# X-Env-Var-raid1_external_pmap-Required: n
# X-Env-Var-raid1_external_pmap-Valid: clear,crypt
# X-Env-Var-raid1_external_pmap-Set: y
#
# X-Env-Var-raid1_external_key_method: random
# X-Env-Var-raid1_external_key_method-Desc: Method for generating encryption keys
#  random: Generate random key (default)
#  file: Read key from file
#  env: Read key from environment variable
#  tpm: Use TPM for key storage (future feature)
# X-Env-Var-raid1_external_key_method-Required: n
# X-Env-Var-raid1_external_key_method-Valid: random,file,env,tpm
# X-Env-Var-raid1_external_key_method-Set: y
#
# X-Env-Var-raid1_external_key_file: /boot/luks-key
# X-Env-Var-raid1_external_key_file-Desc: Path to encryption key file (when method=file)
# X-Env-Var-raid1_external_key_file-Required: n
# X-Env-Var-raid1_external_key_file-Valid: string
# X-Env-Var-raid1_external_key_file-Set: y
#
# X-Env-Var-raid1_external_key_env: LUKS_KEY
# X-Env-Var-raid1_external_key_env-Desc: Environment variable containing encryption key (when method=env)
# X-Env-Var-raid1_external_key_env-Required: n
# X-Env-Var-raid1_external_key_env-Valid: string
# X-Env-Var-raid1_external_key_env-Set: y
#
# X-Env-Var-raid1_external_key_size: 512
# X-Env-Var-raid1_external_key_size-Desc: Encryption key size in bits
# X-Env-Var-raid1_external_key_size-Required: n
# X-Env-Var-raid1_external_key_size-Valid: 256,512,1024
# X-Env-Var-raid1_external_key_size-Set: y
# METAEND
---
