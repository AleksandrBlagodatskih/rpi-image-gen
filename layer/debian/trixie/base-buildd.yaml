# METABEGIN
# X-Env-Layer-Name: debian-trixie-buildd
# X-Env-Layer-Category: distribution
# X-Env-Layer-Desc: Architecture agnostic Debian Trixie buildd base.
#  This provides a base layer specifically designed for automated package
#  building and software compilation.
# X-Env-Layer-Version: 1.0.0
# X-Env-Layer-Requires: locale-base
#
# X-Env-VarRequires: IGconf_locale_timezone,
#  IGconf_locale_default,
#  IGconf_locale_keyboard_layout,
#  IGconf_locale_keyboard_keymap
# METAEND
---
mmdebstrap:
  mode: auto
  variant: buildd
  suite: trixie
  mirrors:
    - deb http://deb.debian.org/debian trixie main contrib non-free non-free-firmware
    - deb http://deb.debian.org/debian-security trixie-security main contrib non-free non-free-firmware
    - deb http://deb.debian.org/debian trixie-updates main contrib non-free non-free-firmware
  essential-hooks:
    - echo tzdata tzdata/Areas select "${IGconf_locale_timezone%%/*}"
        | chroot $1 debconf-set-selections
    - echo tzdata tzdata/Zones/"${IGconf_locale_timezone%%/*}" select "${IGconf_locale_timezone#*/}"
        | chroot $1 debconf-set-selections
    - echo locales locales/locales_to_be_generated multiselect "$IGconf_locale_default" UTF-8
        | chroot $1 debconf-set-selections
    - echo locales locales/default_environment_locale select "$IGconf_locale_default"
        | chroot $1 debconf-set-selections
    - echo keyboard-configuration keyboard-configuration/variant select "$IGconf_locale_keyboard_layout"
        | chroot $1 debconf-set-selections
    - echo keyboard-configuration keyboard-configuration/xkb-keymap select "$IGconf_locale_keyboard_keymap"
        | chroot $1 debconf-set-selections
    - printf "LANG=C.UTF-8\nLANGUAGE=C\n" > $1/etc/default/locale
