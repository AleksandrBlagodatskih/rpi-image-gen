# METABEGIN
# X-Env-Layer-Name: systemd-net-min
# X-Env-Layer-Desc: Systemd networking via networkd and resolved services (requires systemd, compatible with systemd-chrony-min)
# X-Env-Layer-Version: 2.0.0
# X-Env-Layer-Requires: systemd
# METAEND
---
mmdebstrap:
  packages:
    - systemd
    - systemd-resolved
  customize-hooks:
    - $BDEBSTRAP_HOOKS/enable-units "$1" systemd-networkd
    - $BDEBSTRAP_HOOKS/enable-units "$1" systemd-resolved
    - mkdir -p $1/etc/systemd/network
    - ln -sf /dev/null $1/etc/systemd/network/99-default.link
    - ln -sf /dev/null $1/etc/systemd/network/73-usb-net-by-mac.link
    - $LAYER_HOOKS/systemd/netgen eth0 > $1/etc/systemd/network/01-eth0.network
