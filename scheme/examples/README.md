# Каталог examples/ - Примеры использования

Каталог содержит практические примеры использования rpi-image-gen для различных сценариев.

## Доступные примеры

### `slim/`
**Назначение**: Создание минималистичного образа для Raspberry Pi 5
**Особенности**:
- Минимальный набор базовых пакетов
- Кастомные device и image слои
- Демонстрирует управление ресурсами устройств
- Компактный размер образа

**Структура**:
- `config/pi5-slim.yaml` - основная конфигурация
- `device/mypi5/` - кастомная конфигурация устройства
- `image/compact/` - компактная конфигурация образа
- `layer/` - кастомные слои

### `container_chroot/`
**Назначение**: Демонстрация работы с контейнерами и chroot
**Особенности**:
- Настройка контейнерной среды
- Интеграция с Docker
- Пример сборки в изолированной среде

### `custom_layers/`
**Назначение**: Создание пользовательских слоев
**Особенности**:
- Разработка собственных компонентов
- Интеграция с основными слоями
- Модульная архитектура

### `debstore/`
**Назначение**: Управление локальным репозиторием пакетов
**Особенности**:
- Создание локального APT репозитория
- Управление пользовательскими пакетами
- Кеширование для ускорения сборки

### `nested_image/`
**Назначение**: Создание вложенных образов
**Особенности**:
- Вложенные файловые системы
- Многоуровневая структура
- Сложные сценарии развертывания

### `setoptions/`
**Назначение**: Демонстрация различных опций конфигурации
**Особенности**:
- Различные параметры сборки
- Оптимизации производительности
- Настройки безопасности

### `webkiosk/`
**Назначение**: Создание системы для веб-киоска
**Особенности**:
- Автоматический запуск браузера
- Блокировка интерфейса
- Специализированное использование

## Общие особенности

### Безопасность
- По умолчанию отключена возможность входа в систему
- Необходима настройка пароля или SSH ключей для доступа
- Демонстрация безопасных практик конфигурации

### Использование
```bash
# Пример сборки
rpi-image-gen build -S ./examples/slim/ -c pi5-slim.yaml

# Установка пароля через командную строку
rpi-image-gen build <args> -- IGconf_device_user1pass='password'

# SSH доступ с публичным ключом
rpi-image-gen build <args> -- 'IGconf_ssh_pubkey_user1=$(< ~/.ssh/id_rsa.pub)' IGconf_ssh_pubkey_only=y
```

### Структура каждого примера
- `config/` - конфигурационные файлы
- `device/` - конфигурации устройств (опционально)
- `image/` - конфигурации образов (опционально)
- `layer/` - пользовательские слои (опционально)
- `README.md` - документация примера

## Доступные шаблоны

### `example-config-template.yaml`
Шаблон для создания новых конфигураций в примерах:
- Полная структура YAML конфигурации
- Комментарии с объяснениями
- Примеры различных сценариев использования

### `example-device-template.yaml`
Шаблон для создания конфигураций устройств в примерах:
- Структура METABEGIN/METAEND
- Примеры переменных окружения
- Конфигурация mmdebstrap

### `example-layer-template.yaml`
Шаблон для создания пользовательских слоев в примерах:
- Различные категории слоев
- Хуки для разных этапов сборки
- Переменные окружения с валидацией

### `example-script-template.sh`
Шаблон для создания скриптов в примерах:
- Структура bash скрипта
- Логирование и обработка ошибок
- Валидация входных данных

### `example-readme-template.md`
Шаблон для создания документации примеров:
- Структура описания примера
- Инструкции по использованию
- Примеры команд
- Требования и зависимости

## Создание нового примера

1. **Выберите шаблон** из доступных в scheme/examples/
2. **Создайте структуру каталога** для примера:
   ```bash
   mkdir examples/my-example
   mkdir examples/my-example/config
   mkdir examples/my-example/device
   mkdir examples/my-example/layer
   ```
3. **Создайте файлы** на основе шаблонов:
   ```bash
   cp scheme/examples/example-config-template.yaml examples/my-example/config/
   cp scheme/examples/example-readme-template.md examples/my-example/README.md
   ```
4. **Настройте файлы** под ваш сценарий использования
5. **Протестируйте пример** перед добавлением

## Доступные шаблоны

Шаблоны из каталога `scheme/examples/` можно использовать для создания новых компонентов в соответствующих каталогах проекта:

### `example-config-template.yaml`
Шаблон для создания YAML конфигураций:
- Полная структура конфигурации
- Комментарии с объяснениями
- Примеры различных сценариев использования

### `example-device-template.yaml`
Шаблон для создания конфигураций устройств:
- Структура METABEGIN/METAEND
- Примеры переменных окружения
- Конфигурация mmdebstrap

### `example-layer-template.yaml`
Шаблон для создания пользовательских слоев:
- Различные категории слоев
- Хуки для разных этапов сборки
- Переменные окружения с валидацией

### `example-script-template.sh`
Шаблон для создания скриптов:
- Структура bash скрипта
- Логирование и обработка ошибок
- Валидация входных данных

### `example-readme-template.md`
Шаблон для создания документации:
- Структура описания примера
- Инструкции по использованию
- Примеры команд
- Требования и зависимости

## Цель

Примеры демонстрируют:
- Правильные практики использования инструмента
- Различные сценарии применения
- Кастомизацию под конкретные нужды
- Интеграцию с внешними системами

Каждый пример может служить основой для создания собственных конфигураций.
