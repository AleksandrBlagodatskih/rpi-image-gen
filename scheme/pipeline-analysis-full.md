# üìã –ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó –ö–û–ù–í–ï–ô–ï–†–ê –ü–û–°–¢–†–û–ï–ù–ò–Ø –û–ë–†–ê–ó–ê –û–° RPI-IMAGE-GEN

## üéØ **–ü–û–õ–ù–ê–Ø –°–•–ï–ú–ê –ö–û–ù–í–ï–ô–ï–†–ê –ü–û–°–¢–†–û–ï–ù–ò–Ø**

### **–û–°–ù–û–í–ù–û–ô –ö–û–ù–í–ï–ô–ï–† (–ö–û–ú–ê–ù–î–ê `build`)**

| –≠—Ç–∞–ø | –í—Ä–µ–º—è | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã | –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|------|-------|------------|----------------|-----------|
| **1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** | 1-2 —Å–µ–∫ | Bash + Python | `bin/ig`, `lib/cli.sh`, `lib/common.sh`, `lib/dependencies.sh`, `rpi-image-gen` | –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è |
| **2. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã** | 2-5 —Å–µ–∫ | Bash + Python | `config/*.yaml`, `bin/ig`, `site/config_loader.py`, `rpi-image-gen` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏ |
| **3. –°–ª–æ–∏** | 3-10 —Å–µ–∫ | Bash + Python | `layer/*/*.yaml`, `device/*/*.yaml`, `bin/ig`, `site/layer_manager.py`, `rpi-image-gen` | –ü–æ—Ä—è–¥–æ–∫ —Å–±–æ—Ä–∫–∏ |
| **4. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞** | 5-15 —Å–µ–∫ | Bash + Python | `scripts/*.sh`, `layer/*/*.yaml`, `site/config_loader.py`, `rpi-image-gen`, `keydir/*` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è bdebstrap |
| **5. –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞** | 30 —Å–µ–∫-10 –º–∏–Ω | Bash + bdebstrap + podman | `layer-hooks/*.sh`, `bin/runner`, `scripts/*.sh`, `rpi-image-gen`, `site/sbom_generator.py` | –ö–æ—Ä–Ω–µ–≤–∞—è –§–° |
| **6. –û–±—Ä–∞–∑—ã** | 1-5 –º–∏–Ω | Bash + genimage + podman | `layer-hooks/*.sh`, `image/*/*.cfg`, `rpi-image-gen` | –î–∏—Å–∫–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã |
| **7. Deploy** | 1-2 —Å–µ–∫ | Bash | `scripts/deploy.sh`, `rpi-image-gen` | –ì–æ—Ç–æ–≤—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã |

## üîß **–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ö–û–ú–ê–ù–î–´**

| –ö–æ–º–∞–Ω–¥–∞ | –ö–æ–Ω–≤–µ–π–µ—Ä | –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|---------|----------|----------------|-----------|
| **config** | parameter_assembly ‚Üí CLI | `bin/ig config`, `site/config_loader.py` | –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π |
| **layer** | parameter_assembly ‚Üí collect_layers ‚Üí CLI | `bin/ig layer`, `site/layer_manager.py` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ—è–º–∏ |
| **metadata** | parameter_assembly ‚Üí CLI | `bin/ig metadata`, `site/metadata_handler.py` | –†–∞–±–æ—Ç–∞ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ |
| **clean** | parameter_assembly ‚Üí collect_layers ‚Üí –û—á–∏—Å—Ç–∫–∞ | `rpi-image-gen` (clean_worktree) | –û—á–∏—Å—Ç–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ |

## üìä **–£–ß–ê–°–¢–ò–ï –ö–û–ú–ü–û–ù–ï–ù–¢–û–í –í –ö–û–ù–í–ï–ô–ï–†–ï**

| –¢–∏–ø —Ñ–∞–π–ª–æ–≤ | –≠—Ç–∞–ø 1 | –≠—Ç–∞–ø 2 | –≠—Ç–∞–ø 3 | –≠—Ç–∞–ø 4 | –≠—Ç–∞–ø 5 | –≠—Ç–∞–ø 6 | –≠—Ç–∞–ø 7 | –†–æ–ª—å |
|------------|--------|--------|--------|--------|--------|--------|--------|------|
| **config/** | ‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è |  |  |  |  |  |  | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ–±—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é |
| **device/** |  | ‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è |  |  |  |  |  | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∞–ø–ø–∞—Ä–∞—Ç–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é |
| **layer/** |  | ‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è |  |  |  |  |  | –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã |
| **layer-hooks/** |  |  |  |  | ‚úÖ | ‚úÖ |  | –í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–∞—Ö —Å–±–æ—Ä–∫–∏ |
| **scripts/** |  |  | ‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è | ‚úÖ |  |  |  | –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ö—É–∫–∏ |
| **site/** | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | –Ø–¥—Ä–æ Python —Å–∏—Å—Ç–µ–º—ã |
| **lib/** | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ | –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ |
| **bin/** | ‚úÖ |  | ‚úÖ |  | ‚úÖ | ‚úÖ | ‚úÖ | –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —É—Ç–∏–ª–∏—Ç—ã |
| **templates/** | üîÑ | üîÑ | üîÑ | üîÑ | üîÑ | üîÑ | üîÑ | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ) |
| **test/** | üîÑ | üîÑ | üîÑ | üîÑ | üîÑ | üîÑ | üîÑ | –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ) |
| **examples/** | üìã | üìã | üìã | üìã | üìã | üìã | üìã | –†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã |

**–õ–µ–≥–µ–Ω–¥–∞:**
- ‚úÖ **–û—Å–Ω–æ–≤–Ω–∞—è —Ä–æ–ª—å** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- üîÑ **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è** - –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- üìã **–°–ø—Ä–∞–≤–æ—á–Ω–∞—è** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å

## üéØ **–ü–û–î–†–û–ë–ù–´–ô –ê–ù–ê–õ–ò–ó –ö–ê–ñ–î–û–ì–û –≠–¢–ê–ü–ê**

### **–≠–¢–ê–ü 1: –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø (1-2 —Å–µ–∫—É–Ω–¥—ã)**

#### **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- CLI –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –§–∞–π–ª –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π `depends`

#### **–ü—Ä–æ—Ü–µ—Å—Å—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Python –º–æ–¥—É–ª–µ–π** —á–µ—Ä–µ–∑ `bin/ig`
2. **–†–∞–∑–±–æ—Ä –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏** —á–µ—Ä–µ–∑ `lib/cli.sh`
3. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** —á–µ—Ä–µ–∑ `lib/common.sh`
4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** —á–µ—Ä–µ–∑ `lib/dependencies.sh`
5. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—É—Ç–µ–π –ø–æ–∏—Å–∫–∞** –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–∫—Ä–∏–ø—Ç–µ

#### **–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –ö–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (ctx)
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏

### **–≠–¢–ê–ü 2: –°–ë–û–†–ö–ê –ü–ê–†–ê–ú–ï–¢–†–û–í (2-5 —Å–µ–∫—É–Ω–¥)**

#### **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª YAML
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è IGconf_*
- CLI –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

#### **–ü—Ä–æ—Ü–µ—Å—Å—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
1. **–ß—Ç–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** –∏–∑ `config/*.yaml`
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** —á–µ—Ä–µ–∑ `bin/ig config`
3. **Python –æ–±—Ä–∞–±–æ—Ç–∫–∞** —á–µ—Ä–µ–∑ `site/config_loader.py`
4. **–°–æ–∑–¥–∞–Ω–∏–µ overrides** –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–∫—Ä–∏–ø—Ç–µ

#### **–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (`${ctx[IGENVF]}`)
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ overrides (`${ctx[OVRF]}`)
- –°–∞–Ω–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### **–≠–¢–ê–ü 3: –û–ë–†–ê–ë–û–¢–ö–ê –°–õ–û–ï–í (3-10 —Å–µ–∫—É–Ω–¥)**

#### **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å–ª–æ–µ–≤
- –ö–∞—Ç–∞–ª–æ–≥–∏ —Å–ª–æ–µ–≤ (LAYER_PATH)
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### **–ü—Ä–æ—Ü–µ—Å—Å—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
1. **–°–±–æ—Ä —Å–ª–æ–µ–≤ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞** –∏–∑ `layer/*/*.yaml`
2. **–ó–∞–≥—Ä—É–∑–∫–∞ device —Å–ª–æ–µ–≤** –∏–∑ `device/*/*.yaml`
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Å–ª–æ–µ–≤** —á–µ—Ä–µ–∑ `bin/ig layer`
4. **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** —á–µ—Ä–µ–∑ `site/layer_manager.py`
5. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö** –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–∫—Ä–∏–ø—Ç–µ

#### **–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –°–ø–∏—Å–æ–∫ —Å–ª–æ–µ–≤ (`${ctx[LAYER_ORDER]}`)
- –§–∏–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (`${ctx[FINALENV]}`)
- –ì—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### **–≠–¢–ê–ü 4: –ü–û–î–ì–û–¢–û–í–ö–ê –°–ë–û–†–ö–ò (5-15 —Å–µ–∫—É–Ω–¥)**

#### **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –°–ø–∏—Å–æ–∫ —Å–ª–æ–µ–≤
- –§–∏–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—É—Ç–∏

#### **–ü—Ä–æ—Ü–µ—Å—Å—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è** —á–µ—Ä–µ–∑ `scripts/*.sh`
2. **–°–±–æ—Ä mmdebstrap –∫–æ–Ω—Ñ–∏–≥–æ–≤** –∏–∑ `layer/*/*.yaml`
3. **–°–±–æ—Ä–∫–∞ –∫–æ–º–∞–Ω–¥ bdebstrap** —á–µ—Ä–µ–∑ `site/config_loader.py`
4. **–°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π** –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–∫—Ä–∏–ø—Ç–µ
5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ APT** —á–µ—Ä–µ–∑ `keydir/*`

#### **–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è bdebstrap (`${ctx[ENV_BDEBSTRAP]}`)
- –†–∞–±–æ—á–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

### **–≠–¢–ê–ü 5: –ì–ï–ù–ï–†–ê–¶–ò–Ø –§–ê–ô–õ–û–í–û–ô –°–ò–°–¢–ï–ú–´ (30 —Å–µ–∫ - 10 –º–∏–Ω)**

#### **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è bdebstrap
- –°–ª–æ–∏ –∏ –∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –•—É–∫–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

#### **–ü—Ä–æ—Ü–µ—Å—Å—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
1. **Pre-build —Ö—É–∫–∏** —á–µ—Ä–µ–∑ `layer-hooks/pre-build.sh`
2. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ bdebstrap** —á–µ—Ä–µ–∑ `bin/runner`
3. **–≠—Ç–∞–ø—ã —Å–±–æ—Ä–∫–∏** —á–µ—Ä–µ–∑ `scripts/*.sh`
4. **bdebstrap —Ö—É–∫–∏** —á–µ—Ä–µ–∑ `layer-hooks/bdebstrap/*.sh`
5. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ overlays** –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–∫—Ä–∏–ø—Ç–µ
6. **Post-build —Ö—É–∫–∏** —á–µ—Ä–µ–∑ `layer-hooks/post-build.sh`
7. **SBOM –≥–µ–Ω–µ—Ä–∞—Ü–∏—è** —á–µ—Ä–µ–∑ `site/sbom_generator.py`

#### **–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –ö–æ—Ä–Ω–µ–≤–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
- Software Bill of Materials
- –õ–æ–≥–∏ —Å–±–æ—Ä–∫–∏

### **–≠–¢–ê–ü 6: –ì–ï–ù–ï–†–ê–¶–ò–Ø –û–ë–†–ê–ó–û–í (1-5 –º–∏–Ω—É—Ç)**

#### **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –ö–æ—Ä–Ω–µ–≤–∞—è —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±—Ä–∞–∑–æ–≤
- –•—É–∫–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

#### **–ü—Ä–æ—Ü–µ—Å—Å—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
1. **Pre-image —Ö—É–∫–∏** —á–µ—Ä–µ–∑ `layer-hooks/pre-image.sh`
2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è genimage** —á–µ—Ä–µ–∑ `image/*/*.cfg`
3. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ genimage** –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–∫—Ä–∏–ø—Ç–µ
4. **Post-image —Ö—É–∫–∏** —á–µ—Ä–µ–∑ `layer-hooks/post-image.sh`

#### **–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –î–∏—Å–∫–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã (.img)
- –§–∞–π–ª—ã –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (.json)
- –õ–æ–≥–∏ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞–∑–æ–≤

### **–≠–¢–ê–ü 7: –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï (1-2 —Å–µ–∫—É–Ω–¥—ã)**

#### **–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –î–∏—Å–∫–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã
- –§–∞–π–ª—ã –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- SBOM —Ñ–∞–π–ª—ã

#### **–ü—Ä–æ—Ü–µ—Å—Å—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
1. **Deploy —Ö—É–∫–∏** —á–µ—Ä–µ–∑ `scripts/deploy.sh`
2. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤** –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–∫—Ä–∏–ø—Ç–µ

#### **–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –°–∂–∞—Ç—ã–µ –æ–±—Ä–∞–∑—ã
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- –ú–∞–Ω–∏—Ñ–µ—Å—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

## üîÑ **–ü–ê–†–ê–õ–õ–ï–õ–¨–ù–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê**

### **–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:**
- **templates/**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –æ—Å–Ω–æ–≤–Ω—ã–º –∫–æ–Ω–≤–µ–π–µ—Ä–æ–º
- **test/**: –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- **layer-hooks/**: –ù–µ—Å–∫–æ–ª—å–∫–æ —Ö—É–∫–æ–≤ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- **scripts/**: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ

### **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É —ç—Ç–∞–ø–∞–º–∏:**
1. **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ**: 1 ‚Üí 2 ‚Üí 3 ‚Üí 4 ‚Üí 5 ‚Üí 6 ‚Üí 7
2. **–£—Å–ª–æ–≤–Ω—ã–µ**: –≠—Ç–∞–ø—ã 5-7 –º–æ–≥—É—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å—Å—è –ø–æ —Ñ–ª–∞–≥–∞–º
3. **–ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ**: –í–∞–ª–∏–¥–∞—Ü–∏—è –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## üéØ **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–£–¢–ò**

### **–°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π –ø—É—Ç—å:**
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ‚Üí –ü–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Üí –°–ª–æ–∏ ‚Üí –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ ‚Üí (–ü—Ä–æ–ø—É—Å–∫ –§–°) ‚Üí –û–±—Ä–∞–∑—ã ‚Üí –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### **–°–∞–º—ã–π –ø–æ–ª–Ω—ã–π –ø—É—Ç—å:**
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ‚Üí –ü–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Üí –°–ª–æ–∏ ‚Üí –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ ‚Üí –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ ‚Üí –û–±—Ä–∞–∑—ã ‚Üí –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### **–ü—É—Ç—å –æ—Ç–ª–∞–¥–∫–∏:**
–ö–∞–∂–¥—ã–π —ç—Ç–∞–ø —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º —Ä–µ–∂–∏–º–æ–º (INTERACTIVE=y)

## üìà **–°–¢–ê–¢–ò–°–¢–ò–ö–ê –ó–ê–ì–†–£–ó–ö–ò –ö–û–ú–ü–û–ù–ï–ù–¢–û–í**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | % –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|----------------|-------------|----------|
| **rpi-image-gen** | 100% | üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è | –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç, –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö |
| **bin/ig** | 80% | üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è | Python –¥–≤–∏–∂–æ–∫, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ 5/7 —ç—Ç–∞–ø–∞—Ö |
| **site/** –º–æ–¥—É–ª–∏ | 70% | üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è | Python —è–¥—Ä–æ, –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–æ –≤ 6/7 —ç—Ç–∞–ø–∞—Ö |
| **layer/** | 60% | üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è | –°–ª–æ–∏, –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –ü–û –≤ 2/7 —ç—Ç–∞–ø–∞—Ö |
| **config/** | 50% | üü° –í–∞–∂–Ω–∞—è | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –æ—Å–Ω–æ–≤–Ω–∞—è –≤ 1/7 —ç—Ç–∞–ø–µ |
| **scripts/** | 40% | üü° –í–∞–∂–Ω–∞—è | –•—É–∫–∏, –æ—Å–Ω–æ–≤–Ω—ã–µ –≤ 2/7 —ç—Ç–∞–ø–∞—Ö |
| **layer-hooks/** | 30% | üü¢ –°—Ä–µ–¥–Ω—è—è | –•—É–∫–∏ —ç—Ç–∞–ø–æ–≤, –≤ 2/7 —ç—Ç–∞–ø–∞—Ö |
| **lib/** | 90% | üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è | –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω—ã –≤ 6/7 —ç—Ç–∞–ø–∞—Ö |
| **templates/** | 20% | üü¢ –°—Ä–µ–¥–Ω—è—è | –®–∞–±–ª–æ–Ω—ã, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö |
| **test/** | 10% | üü¢ –°—Ä–µ–¥–Ω—è—è | –¢–µ—Å—Ç—ã, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö |

## üîç **–¢–û–ß–ö–ò –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê**

### **–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞
- **–û–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö** –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫** –≤ –ª–æ–≥–∞—Ö
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤** (CPU, RAM, Disk)

### **–ö–ª—é—á–µ–≤—ã–µ –ª–æ–≥–∏:**
- `/tmp/ig.log` - –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥
- `/tmp/ig.env` - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `/tmp/layers.order` - –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–µ–≤
- `/tmp/final.env` - —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤:**
```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CPU –∏ –ø–∞–º—è—Ç–∏
watch -n 1 'ps aux | grep -E "(bdebstrap|mmdebstrap|genimage)" | grep -v grep'

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
watch -n 5 'df -h; echo; du -sh work/'

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ç–∏
watch -n 5 'ss -tuln | grep LISTEN'
```

## üìä **–í–†–ï–ú–ï–ù–ù–´–ï –•–ê–†–ê–ö–¢–ï–†–ò–°–¢–ò–ö–ò**

| –≠—Ç–∞–ø | –í—Ä–µ–º—è | CPU | RAM | Disk | Network |
|------|-------|-----|-----|------|---------|
| **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** | 1-2 —Å–µ–∫ | –ù–∏–∑–∫–∏–π | –ù–∏–∑–∫–∏–π | –ù–∏–∑–∫–∏–π | –°—Ä–µ–¥–Ω–∏–π |
| **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã** | 2-5 —Å–µ–∫ | –°—Ä–µ–¥–Ω–∏–π | –°—Ä–µ–¥–Ω–∏–π | –°—Ä–µ–¥–Ω–∏–π | –ù–∏–∑–∫–∏–π |
| **–°–ª–æ–∏** | 3-10 —Å–µ–∫ | –°—Ä–µ–¥–Ω–∏–π | –°—Ä–µ–¥–Ω–∏–π | –°—Ä–µ–¥–Ω–∏–π | –ù–∏–∑–∫–∏–π |
| **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞** | 5-15 —Å–µ–∫ | –°—Ä–µ–¥–Ω–∏–π | –°—Ä–µ–¥–Ω–∏–π | –°—Ä–µ–¥–Ω–∏–π | –°—Ä–µ–¥–Ω–∏–π |
| **–§–°** | 30 —Å–µ–∫-10 –º–∏–Ω | –í—ã—Å–æ–∫–∏–π | –í—ã—Å–æ–∫–∏–π | –í—ã—Å–æ–∫–∏–π | –í—ã—Å–æ–∫–∏–π |
| **–û–±—Ä–∞–∑—ã** | 1-5 –º–∏–Ω | –í—ã—Å–æ–∫–∏–π | –°—Ä–µ–¥–Ω–∏–π | –í—ã—Å–æ–∫–∏–π | –ù–∏–∑–∫–∏–π |
| **Deploy** | 1-2 —Å–µ–∫ | –ù–∏–∑–∫–∏–π | –ù–∏–∑–∫–∏–π | –°—Ä–µ–¥–Ω–∏–π | –ù–∏–∑–∫–∏–π |

## üéâ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï**

–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ rpi-image-gen –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **6-—ç—Ç–∞–ø–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä** —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:

1. **–ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –∫–∞–∂–¥—ã–π —Ç–∏–ø —Ñ–∞–π–ª–æ–≤ –∏–º–µ–µ—Ç —á–µ—Ç–∫—É—é —Ä–æ–ª—å
2. **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ** - —ç—Ç–∞–ø—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ —Å—Ç—Ä–æ–≥–æ–º –ø–æ—Ä—è–¥–∫–µ
3. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
4. **–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ** - –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ podman
5. **–ü–æ–ª–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å** - –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—Å—è

**–û–±—â–µ–µ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏**: –æ—Ç 1 –º–∏–Ω—É—Ç—ã (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—É—Ç—å) –¥–æ 20+ –º–∏–Ω—É—Ç (–ø–æ–ª–Ω—ã–π –ø—É—Ç—å —Å –æ—Ç–ª–∞–¥–∫–æ–π).

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:**
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ—Å—Ç—å
- ‚úÖ –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ –ü–æ–ª–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å
- ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–≠—Ç–∞ —Å—Ö–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏ –Ω–∞–¥–µ–∂–Ω–æ–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –æ–±—Ä–∞–∑–æ–≤ –û–° Raspberry Pi —Å –ø–æ–ª–Ω–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–µ–π –∏ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –ø—Ä–æ—Ü–µ—Å—Å–∞.
