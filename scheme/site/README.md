# Каталог site/ - Python движок

Каталог содержит Python модули, реализующие основную логику проекта.

## Модули

### `layer_manager.py`
**Назначение**: Управление слоями и их зависимостями
**Основные классы**:
- `LayerManager` - основной менеджер слоев
- Обнаружение и загрузка слоев
- Разрешение зависимостей
- Валидация конфигурации
- Генерация окружения сборки

### `metadata_parser.py`
**Назначение**: Разбор метаданных слоев
**Функции**:
- `Metadata` - класс для работы с метаданными
- Разбор YAML файлов с метаданными
- Валидация переменных окружения
- Генерация документации

### `config_loader.py`
**Назначение**: Загрузка и обработка конфигурации
**Функции**:
- Загрузка YAML конфигураций
- Обработка переменных окружения
- Валидация параметров
- Слияние конфигураций

### `env_types.py`
**Назначение**: Определение типов переменных окружения
**Классы**:
- `VariableResolver` - обработчик переменных
- `EnvVariable` - определение переменных
- Валидация значений переменных
- Обработка шаблонов

### `validators.py`
**Назначение**: Валидация данных
**Функции**:
- Проверка корректности данных
- Валидация путей и файлов
- Проверка зависимостей
- Обработка ошибок валидации

### `logger.py`
**Назначение**: Система логирования
**Функции**:
- `log_warning()`, `log_success()`, `log_failure()`, `log_error()`
- Форматированный вывод сообщений
- Уровни логирования
- Цветная консоль

## Архитектура

Python компоненты обеспечивают:
- Загрузку и валидацию слоев
- Обработку зависимостей
- Генерацию конфигурации сборки
- Валидацию параметров
- Документирование системы

Используются через главный скрипт `bin/ig`:
```python
from config_loader import ConfigLoader_register_parser
from metadata_parser import Metadata_register_parser
from layer_manager import LayerManager_register_parser
```

## Доступные шаблоны

### `python-module-template.md`
Шаблон для создания Python модулей:
- Структура класса с документацией
- Обработка ошибок и логирование
- Функции регистрации argparse
- Лучшие практики разработки

## Создание нового Python модуля

1. **Создайте файл модуля** на основе шаблона:
   ```bash
   cp scheme/site/python-module-template.md site/my_module.py
   ```
2. **Настройте класс** `[ClassName]` для вашей логики:
   - Обновите `__init__()` метод
   - Реализуйте основные методы
   - Добавьте обработку ошибок
3. **Настройте argparse** в функции `parse_arguments()`:
   - Добавьте необходимые аргументы
   - Настройте обработку параметров
4. **Интегрируйте с CLI**:
   ```python
   # В основном CLI файле
   from my_module import MyClass
   ```
5. **Протестируйте модуль**:
   ```bash
   python3 -c "from site.my_module import MyClass; print('Модуль загружен успешно')"
   ```
