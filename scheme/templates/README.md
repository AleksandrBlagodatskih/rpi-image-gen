# Каталог templates/ - Шаблоны

Каталог содержит шаблоны для генерации документации и конфигураций.

## Структура каталогов

### `docs/`
**Назначение**: Шаблоны для генерации документации
**Содержит**:
- `html/index.html` - главная страница документации
- `html/layer.html` - шаблон описания слоев
- `html/layer-index.html` - индекс слоев
- `html/variable-validation.html` - валидация переменных

### `rpi/`
**Назначение**: Шаблоны для Raspberry Pi
**Содержит**:
- `boot-firmware/` - шаблоны загрузчика
  - `cmdline.txt` - параметры командной строки ядра
  - `config.txt` - конфигурация загрузчика
- `slot-helper.in.head` - начало скрипта слотов
- `slot-helper.in.tail` - конец скрипта слотов
- `sudo/010_pi-nopasswd` - настройки sudo без пароля

## Доступные шаблоны

### `jinja2-template.j2`
Шаблон для создания Jinja2 шаблонов:
- Стандартная структура Jinja2
- Комментарии с объяснениями
- Примеры управляющих структур
- Интеграция с переменными rpi-image-gen

### `service-template.service`
Шаблон для создания systemd сервисов:
- Структура unit файла
- Параметры сервиса
- Зависимости и условия запуска
- Описание и документация

### `udev-rule-template.rules`
Шаблон для создания правил udev:
- Структура правил udev
- Параметры устройств
- Условия срабатывания
- Действия и скрипты

### `cron-template.cron`
Шаблон для создания cron заданий:
- Структура crontab
- Параметры времени выполнения
- Команды и скрипты
- Комментарии и описания

### `nginx-config-template.conf`
Шаблон для создания конфигурации nginx:
- Структура конфигурации сервера
- Настройки виртуальных хостов
- SSL и безопасность
- Кеширование и оптимизация

### `dockerfile-template.Dockerfile`
Шаблон для создания Dockerfile:
- Структура многоэтапной сборки
- Базовые образы
- Установка зависимостей
- Конфигурация приложения

## Создание нового шаблона

1. **Выберите тип шаблона** из доступных в scheme/templates/
2. **Создайте файл шаблона** в соответствующем подкаталоге
3. **Используйте синтаксис Jinja2** для динамических значений:
   ```jinja2
   {# Комментарий #}
   {{ variable_name }}
   {% if condition %}
   блок кода
   {% endif %}
   ```
4. **Добавьте документацию** с примерами использования

## Шаблоны для создания файлов

Шаблоны из каталога `scheme/templates/` можно использовать для создания файлов в соответствующих каталогах проекта:

### `example-readme-template.md`
Шаблон для создания документации README.md:
- Структура описания компонента
- Инструкции по использованию
- Примеры команд
- Требования и зависимости

### Использование шаблона README
1. **Выберите шаблон** из scheme/templates/
2. **Скопируйте в нужный каталог**:
   ```bash
   cp scheme/templates/example-readme-template.md [target-dir]/README.md
   ```
3. **Настройте содержимое** под ваш компонент
4. **Добавьте специфичную информацию** о вашем каталоге

## Использование

Шаблоны используются системой сборки для:
- Генерации документации по слоям
- Создания конфигурации загрузчика
- Настройки прав доступа
- Автоматизации процессов

Переменная `RPI_TEMPLATES` указывает путь к шаблонам:
```bash
printf 'RPI_TEMPLATES="%s"\n' "$IGTOP/templates/rpi" >> "${ctx[IGENVF]}"
```

## Лучшие практики

- Используйте описательные имена для шаблонов
- Добавляйте подробные комментарии
- Тестируйте шаблоны с различными данными
- Документируйте все переменные и параметры
- Используйте соглашения именования проекта
